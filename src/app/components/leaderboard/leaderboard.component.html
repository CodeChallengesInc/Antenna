<div fxLayout="column" fxLayoutAlign="center center">
  <div class="mat-subheading-2">
    Leaderboard
  </div>
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z2" matSort matSortActive="score" matSortDirection="desc">
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
      <td mat-cell *matCellDef="let animal">
        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
          <div class="leaderboard__animal" [style.backgroundColor]="animal.color" [style.borderColor]="getBorderColor(animal)"></div>
          <div>{{ animal.name }}</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="score">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Score</th>
      <td mat-cell *matCellDef="let animal"> {{ animal.score | number }} </td>
    </ng-container>

    <ng-container matColumnDef="errors">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Errors</th>
      <td mat-cell *matCellDef="let animal">
        <div *ngIf="animal.error" class="mat-error" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
          <mat-icon color="warn" [matTooltip]="animal.error">error</mat-icon>
          <div>{{ animal.error }}</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="menu" stickyEnd>
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let animal">
        <button *ngIf="allowViewingCode" mat-icon-button (click)="viewCode(animal)">
          <mat-icon>code</mat-icon>
        </button>

        <button *ngIf="animal.error" color="warn" mat-icon-button (click)="showError(animal)">
          <mat-icon>error</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>
